{"ast":null,"code":"var _jsxFileName = \"/Users/Tobias/Desktop/social_engineers/client/src/components/GameLobby.js\",\n    _s = $RefreshSig$();\n\nimport { json } from \"body-parser\";\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GameLobby(props) {\n  _s();\n\n  const [gamestate, setGamestate] = useState(null);\n  const [username, setUsername] = useState(null);\n  const [otherPlayers, setOtherPlayers] = useState(null); // Probably dont need this\n\n  const [uID, setUID] = useState(null);\n  useEffect(() => {\n    if (props.gamestate != null) {\n      setGamestate(props.gamestate);\n    }\n  }, [gamestate]);\n  useEffect(() => {\n    if (gamestate == null) {\n      getGameStateFromServer();\n    }\n  }, [gamestate]);\n  useEffect(() => {\n    if (username == null) {\n      getUseridFromServer();\n    }\n  }, [username]);\n  useEffect(() => {\n    if (otherPlayers == null) {\n      getOtherPlayers();\n    }\n  }, [otherPlayers]);\n\n  const getOtherPlayers = () => {\n    if (gamestate == null) {\n      console.log(\"Cant get usernames without a gamestate id\");\n    } else {\n      fetch('/get_players', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'Application/Json'\n        },\n        body: JSON.stringify({\n          gamestate_id: gamestate.id\n        })\n      }).then(res => res.json()).then(data => {\n        // usernames should be here\n        // names are in a list\n        setOtherPlayers(data);\n        console.log(data);\n      });\n    }\n  };\n\n  const renderOtherPlayers = () => {\n    if (otherPlayers != null) {\n      return otherPlayers.map(player => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: player.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 49\n      }, this));\n    }\n  };\n\n  const renderUsername = () => {\n    if (username != null) {\n      return username.toString();\n    }\n  };\n\n  const getGameStateFromServer = () => {\n    fetch('/get_gamestate', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/Json'\n      }\n    }).then(res => res.json()).then(data => {\n      if (data != null) {\n        console.log(data);\n        setGamestate(data);\n      } else {\n        console.log(\"Data was null. Expected a gamestate for the session\");\n      }\n    });\n  };\n\n  const getUseridFromServer = () => {\n    console.log(\"hi\");\n    console.log(\"Getting userid from server\");\n    fetch(\"/get_username\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/Json'\n      }\n    }).then(res => res.json()).then(data => {\n      console.log(\"data from server: \" + data);\n\n      if (data.username != null) {\n        setUsername(data.username);\n      } else {\n        console.log(\"No username in data from server...\");\n      }\n    });\n  };\n\n  const Players = () => {\n    if (gamestate == null) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No game created yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 20\n      }, this);\n    } else {\n      gamestate.players.forEach(player => {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: player.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 24\n        }, this);\n      });\n    }\n  };\n\n  if (gamestate != null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: JSON.stringify(gamestate)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome to the game lobby, \", renderUsername()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Other players:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 42\n        }, this), renderOtherPlayers()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 20\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome \", username, \". No game has been created yet.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }, this);\n  }\n}\n\n_s(GameLobby, \"H5AiaiHAlJTHl5iLLorlD7kx5WY=\");\n\n_c = GameLobby;\n\nvar _c;\n\n$RefreshReg$(_c, \"GameLobby\");","map":{"version":3,"sources":["/Users/Tobias/Desktop/social_engineers/client/src/components/GameLobby.js"],"names":["json","React","useState","useEffect","GameLobby","props","gamestate","setGamestate","username","setUsername","otherPlayers","setOtherPlayers","uID","setUID","getGameStateFromServer","getUseridFromServer","getOtherPlayers","console","log","fetch","method","headers","body","JSON","stringify","gamestate_id","id","then","res","data","renderOtherPlayers","map","player","renderUsername","toString","Players","players","forEach"],"mappings":"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","sourcesContent":["import { json } from \"body-parser\";\nimport React, {useState, useEffect} from \"react\";\n\nexport default function GameLobby(props){\n\n    const [gamestate, setGamestate] = useState(null)\n    const [username, setUsername] = useState(null)\n    const [otherPlayers, setOtherPlayers] = useState(null)\n\n    // Probably dont need this\n    const [uID, setUID] = useState(null)\n\n    useEffect( () => {\n        if(props.gamestate != null){\n            setGamestate(props.gamestate)\n        }\n    }, [gamestate])\n\n    useEffect( () => {\n        if(gamestate == null){\n            getGameStateFromServer()\n        }\n    }, [gamestate])\n\n    useEffect( () => {\n        if(username == null){\n            getUseridFromServer();\n        }\n    }, [username])\n\n    useEffect( () => {\n        if(otherPlayers == null){\n            getOtherPlayers();\n        }\n    }, [otherPlayers])\n\n\n    \n\n    const getOtherPlayers = () => {\n        if(gamestate == null){\n            console.log(\"Cant get usernames without a gamestate id\")\n        }\n        else{\n            fetch('/get_players', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'Application/Json'\n                },\n                body: \n                    JSON.stringify({gamestate_id: gamestate.id})\n            })\n            .then((res) => res.json())\n            .then((data) => {\n                // usernames should be here\n                // names are in a list\n                setOtherPlayers(data);\n                console.log(data);\n            })\n        }\n    }\n\n    const renderOtherPlayers = () => {\n        if(otherPlayers != null){\n            return otherPlayers.map((player) => <li>{player.username}</li>)\n        }\n    }\n\n    const renderUsername = () => {\n        if(username != null) {\n            return username.toString()\n        }\n    }\n\n    const getGameStateFromServer = () => {\n        fetch('/get_gamestate', {\n            method: 'GET',\n            headers: {'Content-Type' : 'application/Json'}\n        })\n        .then((res) => res.json())\n        .then((data) => {\n            if(data != null)\n            {   \n                console.log(data);\n                setGamestate(data);\n            }\n            else{\n                console.log(\"Data was null. Expected a gamestate for the session\")\n            }\n        })\n    }\n\n    const getUseridFromServer = () => {\n        console.log(\"hi\");\n            console.log(\"Getting userid from server\");\n            fetch(\"/get_username\", {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/Json'\n                  }\n              })\n            .then((res) => res.json())\n            .then((data) => {\n                console.log(\"data from server: \" + data);\n                if(data.username != null){\n                    setUsername(data.username);\n                }\n                else{\n                    console.log(\"No username in data from server...\");\n                }\n            });\n    }\n\n    const Players = () => {\n        if(gamestate == null){\n            return <p>No game created yet.</p>\n        }\n        else{\n            gamestate.players.forEach(player => {\n                return <p>{player.username}</p>\n            });\n        }\n    }\n\n        if(gamestate != null){\n            return(<div>\n                <div>\n                    {JSON.stringify(gamestate)}\n                </div>\n                <h1>Welcome to the game lobby, {renderUsername()}</h1>\n                <div>\n                    <p>Other players:</p><br/>\n                    {renderOtherPlayers()}\n                </div>\n            </div>)\n        }\n        else{\n            return(\n                <div>\n                    <h1>Welcome {username}. No game has been created yet.</h1>\n                </div>\n            )\n        }\n    }\n\n"]},"metadata":{},"sourceType":"module"}